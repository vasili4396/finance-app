## Запуск проекта

Клонируем репозиторий себе на компьютер, далее запуск производится через *docker*.

Запуск джанго-сервера и базы:

```shell
docker-compose up -d
```

В случае cold start'а (если запускате первый раз), джанго сервер может выдать ошибку,
что не видит подключения к базе. Это нормально, т.к. mysql сервер несколько раз
может перезапуститься. Все это дело лечит healtchecker докера.

*После запуска докер сервисов необходимо
немного подождать (20-30 сек), прежде чем идти дальше*

Проверить работоспособность поднятого сервера можно,
сходив в браузере на [http://localhost:8000](http://localhost:8000/).
Там должна быть приветственная страница джанги.

Вместе с поднятием веб-сервера в базе автоматически создаться superuser. Это позволит зайти в
админку джанги [http://localhost:8000/admin/](http://localhost:8000/admin/)

```text
username: admin
password: admin
```

## Наполнение базы данных

Когда поднялся веб-сервер, можно выполнить команду для наполнения базы данными:
```shell
docker-compose run backend fill_db
```

Для наполнения используется библиотека **Faker**. Сам скрипт лежит в
**users/managments/commands/fill_db.py**

Скрипт создаст в базе 20000 пользователей и около 150.000 транзакций.

## Доступные endpoint'ы

Доступна только одна GET ручка по следующему урлу:
http://localhost:8000/users/api/accounting/<user_id>/

Для ручки допустимо использование GET параметра **date** в формате ISO даты. Например:

http://localhost:8000/users/api/accounting/23/?date=2020-10-30

## Запуск тестов

Запуск тестов производится посредством команды:
```shell
docker-compose run backend test
```
